import{f as K,j as M,a as u,t as d,s as A}from"./disclose-version.CuBZ2UMj.js";import{h as E,p as P,f as Q,t as n,a as S,ai as U,c as w,s as b,r as p,z as v,A as h}from"./runtime.BHE_jgcz.js";import{p as N,i as I}from"./props.DEeGB9ks.js";import{h as V,s as i}from"./attributes.Dq7Nhvgo.js";import{u as k}from"./image.DAEbOO9n.js";function W(e,s){var t=e.__className,a=X(s);E&&e.className===a?e.__className=a:(t!==a||E&&e.className!==a)&&(s==null?e.removeAttribute("class"):e.className=a,e.__className=a)}function X(e){return e??""}function F(e,s){s()==!0?s(!1):s(!0)}var Y=d('<figcaption class="svelte-1wwv4ew"> </figcaption>'),Z=d('<figcaption class="svelte-1wwv4ew"> </figcaption>'),$=d('<div class="shade svelte-1wwv4ew"><figure class="lightbox svelte-1wwv4ew"><img loading="lazy" class="svelte-1wwv4ew"> <!></figure></div>'),tt=d('<figure><img class="svelte-1wwv4ew"> <!></figure> <!>',1);function lt(e,s){P(s,!0);let t=N(s,"src",19,()=>s.portableText.value),a=N(s,"showLightbox",15,!1),L=N(s,"style",3,"");function o(c){const r=c.split("-")[2],[f,l]=r.split("x").map(x=>parseInt(x,10)),m=f/l;return{width:f,height:l,aspectRatio:m}}function R(c){return c.substring(c.lastIndexOf("-")+1)}const j=R(t().asset._ref);var z=tt();M("scroll",U,()=>{a(!1)});var _=Q(z);_.__click=[F,a];var g=w(_);n(()=>i(g,"src",k(t()).url())),n(()=>i(g,"width",o(t().asset._ref).width)),n(()=>i(g,"height",o(t().asset._ref).height));const D=h(()=>o(t().asset._ref).width??""),O=h(()=>o(t().asset._ref).height??""),T=h(()=>`aspect-ratio: ${v(D)} / ${v(O)}`);var q=b(g,2);I(q,()=>t().caption,c=>{var r=Y(),f=w(r);p(r),n(()=>A(f,t().caption)),u(c,r)}),p(_);var B=b(_,2);I(B,()=>a()==!0,c=>{var r=$();r.__click=[F,a];var f=w(r),l=w(f);n(()=>i(l,"src",j=="svg"?k(t()).format("png").url():k(t()).url())),n(()=>i(l,"width",o(t().asset._ref).width)),n(()=>i(l,"height",o(t().asset._ref).height));const m=h(()=>o(t().asset._ref).width??""),x=h(()=>o(t().asset._ref).height??""),C=h(()=>`aspect-ratio: ${v(m)} / ${v(x)}`);var G=b(l,2);I(G,()=>t().caption,H=>{var y=Z(),J=w(y);p(y),n(()=>A(J,t().caption)),u(H,y)}),p(f),p(r),n(()=>{i(l,"alt",t().alt),i(l,"style",v(C))}),V(l),u(c,r)}),n(()=>{W(_,`${(t().floatLeft?"float-left":t().floatRight?"float-right":"")??""} svelte-1wwv4ew`),i(_,"style",L()),i(g,"alt",t().alt),i(g,"style",v(T))}),u(e,z),S()}K(["click"]);export{lt as I};
