import{h as de,a as l,t as y,c as L,s as G}from"../chunks/disclose-version.CuBZ2UMj.js";import{p as ve,a as ue,$ as ge,s as v,f as S,B as pe,t as E,c as i,r as c,z as a}from"../chunks/runtime.BHE_jgcz.js";import{a as P}from"../chunks/await.scKxN5w3.js";import{b as _e,i as ee}from"../chunks/props.DEeGB9ks.js";import{e as R,i as N}from"../chunks/each.SSPHf1Pv.js";import{s as te}from"../chunks/attributes.Dq7Nhvgo.js";import{b as I}from"../chunks/select.CyaiXdXn.js";import{s as me}from"../chunks/store.EV_EhI1P.js";import{C as ae}from"../chunks/Card.uJxSC4T8.js";import{g as fe}from"../chunks/entry.DPh96igf.js";import{p as he}from"../chunks/stores.D18a2V27.js";import{d as we,w as be}from"../chunks/index.BB0j7sDI.js";let oe;oe=he;const ye={keepFocus:!0,noScroll:!0,replaceState:!0},Ce={keepFocus:!0,noScroll:!0,replaceState:!1};function K(d,g,D=(x,Y)=>JSON.stringify(x)===JSON.stringify(Y)){return typeof d=="object"&&typeof g=="object"&&D(d,g)}const Q=new Set;let re;const se=new Map,X={encode:d=>d.toString(),decode:d=>d?d.toString():null};function Me(d,{encode:g=X.encode,decode:D=X.decode,defaultValue:x}=X,{debounceHistory:Y=0,pushHistory:Z=!0,sort:o=!0,showDefaults:J=!0,equalityFn:U}={}){const W=be(null);let j=!0,f;function O(u,m){j=!1;const T=window.location.hash,z=p=>{if(u==null)p.delete(d);else{const w=g(u);w==null?p.delete(d):p.set(d,w)}};Q.add(z),clearTimeout(re);const h=new URLSearchParams(window.location.search);re=setTimeout(async()=>{Q.forEach(p=>{p(h)}),clearTimeout(se.get(d));{W.set(u);async function p(){o&&h.sort(),await fe(`?${h}${T}`,Z?Ce:ye),W.set(null)}m||Y===0?p():se.set(d,setTimeout(p,Y))}Q.clear()})}const{subscribe:B}=we([oe,W],([u,m],T)=>{var p,w,A;if(m!=null)return K(f,m,U)?void 0:(f=structuredClone(m),T(m));const z=(A=(w=(p=u==null?void 0:u.url)==null?void 0:p.searchParams)==null?void 0:w.get)==null?void 0:A.call(w,d);if(z==null&&x!=null)return J&&O(x,j),K(f,x,U)?void 0:(f=structuredClone(x),T(x));const h=D(z);if(!K(f,h,U))return f=structuredClone(h),T(h)});return{set(u){O(u)},subscribe:B,update:u=>{const m=u(f);O(m)}}}var xe=y('<meta property="og:title" content="gallery | nezu.world"> <meta property="og:type" content="website"> <meta property="og:description" content="Art by Lisa M"> <meta property="og:description" content="Art by Lisa M."> <meta property="og:url"> <meta property="og:site_name" content="nezu.world"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="gallery | nezu.world"> <meta name="twitter:description" content="Art by Lisa M"> <meta name="twitter:description" content="Art by Lisa M."> <meta name="twitter:url"> <meta name="twitter:site" content="@ncb0_"> <meta name="twitter:creator" content="@ncb0_"> <meta property="og:image" content="https://nezu.world/icon/android-chrome-512x512.png"> <meta property="twitter:image" content="https://nezu.world/icon/android-chrome-512x512.png">',1),ze=y('<option class="svelte-17w5gg6"> </option>'),Se=y('<option disabled class="svelte-17w5gg6">loading…</option>'),Oe=y('<option class="svelte-17w5gg6"> </option>'),Te=y('<option disabled class="svelte-17w5gg6">loading…</option>'),Le=y('<option class="svelte-17w5gg6"> </option>'),Ae=y('<option disabled class="svelte-17w5gg6">loading…</option>'),Ye=y('<option class="svelte-17w5gg6"> </option>'),Ue=y('<option disabled class="svelte-17w5gg6">loading…</option>'),We=y("<p>loading…</p>"),Ee=y('<article class="svelte-17w5gg6"><section><h1>gallery</h1></section> <section><h2>filters</h2> <div class="options svelte-17w5gg6"><div><label for="year" class="svelte-17w5gg6">year</label> <select name="Year" id="year" multiple size="0" class="svelte-17w5gg6"><option disabled selected label="select" class="svelte-17w5gg6">(select year)</option><!></select></div> <div><label for="media" class="svelte-17w5gg6">media</label> <select name="Media" id="media" multiple size="0" class="svelte-17w5gg6"><option disabled selected label="select" class="svelte-17w5gg6">(select media)</option><!></select></div> <div><label for="characters" class="svelte-17w5gg6">characters</label> <select name="Characters" id="characters" multiple size="0" class="svelte-17w5gg6"><option disabled selected label="select" class="svelte-17w5gg6">(select characters)</option><!></select></div> <div><label for="cw" class="svelte-17w5gg6">content warnings</label> <select name="Content Warnings" id="cw" multiple size="0" class="svelte-17w5gg6"><option disabled selected label="select" class="svelte-17w5gg6">(select content warnings)</option><!></select></div></div></section> <section data-sveltekit-preload-data="hover"><div class="card-grid"><!></div></section></article>');function Qe(d,g){ve(g,!0),me(),Me("test");const o=_e({selectedCharacters:[],selectedMedia:[],selectedCW:[],selectedYear:[]}),J=e=>o.selectedCharacters.length===0||e.characters&&e.characters.some(t=>o.selectedCharacters.includes(t._key)),U=e=>o.selectedMedia.length===0||e.media&&e.media.some(t=>o.selectedMedia.includes(t._key)),W=e=>o.selectedCW.length===0||e.cw&&e.cw.some(t=>o.selectedCW.includes(t._key)),j=e=>o.selectedYear.length===0||Array.isArray(e.year)&&e.year.some(t=>o.selectedYear.includes(t))||!Array.isArray(e.year)&&o.selectedYear.includes(e.year);var f=Ee();de(e=>{var t=xe();ge.title="gallery | nezu.world";var n=v(S(t),8),b=v(n,12);pe(8),E(()=>{te(n,"content",`https://nezu.world/${g.data.currentURL??""}`),te(b,"content",`https://nezu.world/${g.data.currentURL??""}`)}),l(e,t)});var O=v(i(f),2),B=v(i(O),2),u=i(B),m=v(i(u),2),T=v(i(m));P(T,()=>g.data.year,e=>{var t=Se();t.value=(t.__value="loading")==null?"":"loading",l(e,t)},(e,t)=>{var n=L(),b=S(n);R(b,17,()=>a(t).data,N,(C,r)=>{var s=ze(),_={},M=i(s);c(s),E(()=>{_!==(_=a(r))&&(s.value=(s.__value=a(r))==null?"":a(r)),G(M,a(r))}),l(C,s)}),l(e,n)}),c(m),c(u);var z=v(u,2),h=v(i(z),2),p=v(i(h));P(p,()=>g.data.media,e=>{var t=Te();t.value=(t.__value="loading")==null?"":"loading",l(e,t)},(e,t)=>{var n=L(),b=S(n);R(b,17,()=>a(t).data,N,(C,r)=>{var s=Oe(),_={},M=i(s);c(s),E(()=>{_!==(_=a(r))&&(s.value=(s.__value=a(r))==null?"":a(r)),G(M,a(r))}),l(C,s)}),l(e,n)}),c(h),c(z);var w=v(z,2),A=v(i(w),2),le=v(i(A));P(le,()=>g.data.characters,e=>{var t=Ae();t.value=(t.__value="loading")==null?"":"loading",l(e,t)},(e,t)=>{var n=L(),b=S(n);R(b,17,()=>a(t).data,N,(C,r)=>{var s=Le(),_={},M=i(s);c(s),E(()=>{_!==(_=a(r))&&(s.value=(s.__value=a(r))==null?"":a(r)),G(M,a(r))}),l(C,s)}),l(e,n)}),c(A),c(w);var q=v(w,2),F=v(i(q),2),ne=v(i(F));P(ne,()=>g.data.cw,e=>{var t=Ue();t.value=(t.__value="loading")==null?"":"loading",l(e,t)},(e,t)=>{var n=L(),b=S(n);R(b,17,()=>a(t).data,N,(C,r)=>{var s=Ye(),_={},M=i(s);c(s),E(()=>{_!==(_=a(r))&&(s.value=(s.__value=a(r))==null?"":a(r)),G(M,a(r))}),l(C,s)}),l(e,n)}),c(F),c(q),c(B),c(O);var V=v(O,2),k=i(V),ie=i(k);P(ie,()=>g.data.options.initial,e=>{var t=We();l(e,t)},(e,t)=>{var n=L(),b=S(n);R(b,17,()=>a(t).data,N,(C,r)=>{var s=L(),_=S(s);ee(_,()=>j(a(r))&&J(a(r))&&U(a(r))&&W(a(r)),M=>{var $=L(),ce=S($);ee(ce,()=>a(r).nsfw==!0,H=>{ae(H,{get item(){return a(r)},get baseURL(){return`art/${a(r).year??""}`},text:"false",nsfw:"true"})},H=>{ae(H,{get item(){return a(r)},get baseURL(){return`art/${a(r).year??""}`},text:"false"})}),l(M,$)}),l(C,s)}),l(e,n)}),c(k),c(V),c(f),I(m,()=>o.selectedYear,e=>o.selectedYear=e),I(h,()=>o.selectedMedia,e=>o.selectedMedia=e),I(A,()=>o.selectedCharacters,e=>o.selectedCharacters=e),I(F,()=>o.selectedCW,e=>o.selectedCW=e),l(d,f),ue()}export{Qe as component};
